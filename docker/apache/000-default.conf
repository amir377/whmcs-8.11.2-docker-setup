<VirtualHost *:80>
    # Document root for the WHMCS application
    DocumentRoot /var/www/html

    # Directory permissions and overrides
    <Directory /var/www/html>
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>

    # Logging configuration
    ErrorLog ${APACHE_LOG_DIR}/error.log
    CustomLog ${APACHE_LOG_DIR}/access.log combined

    # Timeout settings to prevent 504 Gateway Timeout errors
    Timeout 600
    ProxyTimeout 600
    KeepAlive On
    KeepAliveTimeout 60
    MaxKeepAliveRequests 100

    # Gzip Compression (Disabled if `no-gzip` is set)
    <IfModule mod_deflate.c>
        SetEnv no-gzip 1
    </IfModule>

    # Large header buffers for WHMCS requests
    <IfModule mod_headers.c>
        Header always set X-Frame-Options "SAMEORIGIN"
    </IfModule>

    # Increase the size of request headers and body
    LimitRequestBody 52428800
    LimitRequestFields 100
    LimitRequestFieldSize 32768
    LimitRequestLine 8190
</VirtualHost>
